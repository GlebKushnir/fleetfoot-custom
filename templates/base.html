{% load static %}
{% load static tailwind_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
     <!-- Meta -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Alpine JS -->
    <script src="//unpkg.com/alpinejs" defer></script>

    <!-- Stripe -->
    <script src="https://js.stripe.com/v3/"></script>

    <!-- Tailwind CSS -->
    {% tailwind_css %}
    <title>{% block title %}Fleetfoot{% endblock title %}</title>
</head>
<body x-data="{ openMobileNav: false, openLoginForm: false, openRegistrationForm: false}">
    <!-- Messages -->
    {% if messages %}
        <div class="fixed z-50 overflow-hidden border rounded shadow-lg top-6 right-6">
                {% for message in messages %}
                    {% if message.tags == 'success' %}
                        {% include "partials/toasts/toast-success.html" with message=message %}
                    {% elif message.tags == 'error' %}
                        {% include "partials/toasts/toast-error.html" with message=message %}
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    {% endif %}

    {% comment %} Navbar {% endcomment %}
    <div>
        <div class="absolute inset-x-0 top-0 z-40 flex-col items-center justify-between gap-4 px-12 py-5 md:py-4 lg:py-6 md:flex lg:flex-row lg:px-20">
            <nav aria-label="Department navigation">
                <div @click="openMobileNav = true" class="flex items-center justify-center w-12 h-12 mx-auto bg-white rounded-full cursor-pointer md:hidden">
                    <img class="w-6" src="{% static "images/hamburger-icon.svg" %}" alt="Hamburger menu icon">
                </div>
                <ul class="items-center hidden h-12 gap-2 px-4 py-2 bg-white rounded-full shadow-lg md:flex">
                    <li>
                        <a href="{% url "home" %}">
                            <img class="w-8" src="{% static "images/logo-icon.svg" %}" alt="Fleetfoot company logo">
                        </a>
                    </li>
                    <li class="flex items-center gap-2">
                        <a href="{% url 'products-list' 'mens' %}" class="text-sm font-base">Men</a>
                        <img class="h-6" src="{% static "images/menu-seperator.svg" %}" alt="Menu seperator">
                    </li>
                    <li class="flex items-center gap-2">
                        <a href="{% url 'products-list' 'womens'%}"class="text-sm font-base">Women</a>
                        <img class="h-6" src="{% static "images/menu-seperator.svg" %}" alt="Menu seperator">
                    </li>
                    <li class="pr-3">
                        <a href="{% url 'products-list' 'kids' %}" class="text-sm font-base">Kids</a>
                    </li>
                </ul>
            </nav>

            <nav aria-label="Site navigation">
                <ul class="items-center hidden h-12 gap-8 px-6 py-4 bg-white rounded-full shadow-lg md:flex">
                    {% if not user.is_authenticated %}
                        <li class="flex items-center gap-2">
                            <img class="h-6" src="{% static "images/register-icon.svg" %}" alt="Register icon for registration">
                            <span @click="openRegistrationForm = true" class="text-sm cursor-pointer font-base">Register</span>
                        </li>
                        <li @click="openLoginForm = true" class="flex items-center gap-2">
                            <img class="h-5" src="{% static "images/auth-icon.svg" %}" alt="Lock menu icon for the login form">
                            <span class="text-sm cursor-pointer font-base">Login</span>
                        </li>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <li class="flex items-center gap-2">
                            <img class="h-5" src="{% static "images/auth-icon.svg" %}" alt="Lock menu icon for logging out the user">
                            <a href="{% url "logout" %}" class="text-sm font-base">Sign Out</a>
                        </li>
                        <li class="flex items-center gap-2">
                            <img class="h-5" src="{% static "images/profile-icon.svg" %}" alt="Profile menu icon for the profile section">
                            <a href="{% url "profile" %}" class="text-sm font-base">Profile</a>
                        </li>
                        <li class="flex items-center gap-2">
                            <img class="h-5" src="{% static "images/wishlist-icon.svg" %}" alt="Heart menu icon for the wishlist section">
                            <a href="{% url "wishlist" %}" class="text-sm font-base">Wishlist</a>
                        </li>
                        {% if user.is_superuser %}
                            <li class="flex items-center gap-2">
                                <img class="h-5" src="{% static "images/admin-icon.svg" %}" alt="Cog menu icon for the admin section">
                                <a href="{% url "product-admin" %}" class="text-sm font-base">Admin</a>
                            </li>
                        {% endif %}
                    {% endif %}
                    <li class="flex items-center gap-2">
                        <img class="h-5" src="{% static "images/cart-icon.svg" %}" alt="">
                        <a href="{% url "view-cart" %}">
                            {% if grand_total %}
                                €{{ grand_total|floatformat:2 }}
                            {% else %}
                                €0.00
                            {% endif %}
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

        {% comment %} Mobile Menu {% endcomment %}
        <div x-show="openMobileNav" x-cloak class="fixed inset-x-0 top-0 z-50 flex flex-col items-center justify-center w-full h-full gap-6 py-20 text-black bg-white shadow md:hidden">



            <img @click="openMobileNav = false"  class="absolute w-6 cursor-pointer right-6 top-6" src="{% static "images/close-icon.svg" %}" alt="Close icon">
            <h2 class="text-6xl uppercase cursor-pointer text-bold"><a href="{% url "home" %}">Fleetfoot</a></h2>


            <nav aria-label="Department navigation">
                <ul class="relative flex gap-2">
                    <li class="absolute top-0 -translate-x-1/2 -translate-y-32 left-1/2">
                        <a class="flex gap-2" href="{% url "view-cart" %}">
                        <img class="h-5" src="{% static "images/cart-icon.svg" %}" alt="">
                            {% if grand_total %}
                                €{{ grand_total|floatformat:2 }}
                            {% else %}
                                €0.00
                            {% endif %}
                        </a>
                    </li>
                    <li class="flex items-center gap-2">
                        <a href="{% url 'products-list' 'mens' %}" class="text-2xl font-light">Men</a>
                        <img class="h-6" src="{% static "images/menu-seperator.svg" %}" alt="Menu seperator">
                    </li>
                    <li class="flex items-center gap-2">
                        <a href="{% url 'products-list' 'womens' %}" class="text-2xl font-light">Women</a>
                        <img class="h-6" src="{% static "images/menu-seperator.svg" %}" alt="Menu seperator">
                    </li>
                    <li class="pr-3">
                        <a href="{% url 'products-list' 'kids' %}" class="text-2xl font-light">Kids</a>
                    </li>
                </ul>
            </nav>

            <img class="w-1/3" src="{% static "images/horizontal-seperator.png" %}" alt="Line for horizontal seperation of menu elements">

            <nav class="mb-12" aria-label="Site navigation">
                <ul class="flex items-center justify-center gap-4">
                    {% if not user.is_authenticated %}
                        <li class="flex items-center gap-2">
                            <span @click="openRegistrationForm = true" class="text-lg font-light cursor-pointer">Register</span>
                            <img class="h-6" src="{% static "images/menu-seperator.svg" %}" alt="Menu seperator">
                        </li>
                        <li class="flex items-center gap-2">
                            <span @click="openLoginForm = true"  class="text-lg font-light cursor-pointer">Login</span>
                        </li>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <li class="flex items-center gap-2">
                            <a href="{% url "logout" %}" class="text-lg font-light">Sign Out</a>
                        </li>
                    {% endif %}
                </ul>

                <ul class="flex items-center justify-center gap-4 mt-2">
                    {% if user.is_authenticated %}
                        <li class="flex items-center gap-2">
                            <a href="#" class="text-lg font-light">Profile</a>
                            <img class="h-6" src="{% static "images/menu-seperator.svg" %}" alt="Menu seperator">
                        </li>
                        <li class="flex items-center gap-2">
                            <a href="{% url "wishlist" %}" class="text-lg font-light">Wishlist</a>
                        </li>
                        {% if user.is_superuser %}
                            <img class="h-6" src="{% static "images/menu-seperator.svg" %}" alt="Menu seperator">
                            <li class="flex items-center">
                                <a href="{% url "product-admin" %}" class="text-lg font-light">Admin</a>
                            </li>
                        {% endif %}
                    {% endif %}
                </ul>
            </nav>
            <img class="absolute bottom-0 w-2/3" src="{% static "images/footer-image.webp" %}" alt="">
        </div>

        {% comment %} Login Form {% endcomment %}
        {% include "partials/login.html" with form=login_form %}
        {% comment %} Registration Form {% endcomment %}
        {% include "partials/registration.html" with form=registration_form %}
    </div>

    {% block content %}{% endblock content %}

    {% comment %} Footer Section {% endcomment %}
    <footer class="relative flex flex-col items-center justify-center py-12 space-y-12 bg-black">
        <div class="flex flex-col items-center justify-center md:justify-between gap-8 j md:flex-row max-w-[1200px] md:mx-auto w-full md:px-16">
            <form class="w-5/6 max-w-[500px] space-y-2" method="POST">
                <label class="block text-sm font-medium text-white" for="">Sign up for more exclusive deals</label>
                <div class="flex justify-between gap-4">
                    <input class="bg-gray-50 border w-2/3 border-gray-300 text-sm place rounded-lg block p-2.5" type="email" placeholder="name@email.com">
                    <button type="submit" class="w-1/3 text-black bg-white  focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center">Subscribe</button>
                </div>
            </form>
            <div class="flex items-center justify-center gap-8 md:self-end">
                <img class="w-10 cursor-pointer" src="{% static "images/facebook-logo.svg" %}" alt="Facebook logo">
                <img class="w-10 cursor-pointer" src="{% static "images/instagram-logo.svg" %}" alt="Facebook logo">
                <img class="w-10 cursor-pointer" src="{% static "images/twitter-logo.svg" %}" alt="Facebook logo">
                <img class="w-10 cursor-pointer" src="{% static "images/github-logo.svg" %}" alt="Facebook logo">
            </div>
        </div>

        <img class="h-[0.8px]" src="{% static "images/horizontal-seperator.png" %}" alt="Horizontal seperator">

        <div class="space-y-2 text-center">
            <span class="block text-sm font-light text-white opacity-80">A project by <a class="font-medium underline" href="https://github.com/ShaneDoyleDev/fleetfoot">Shane Doyle</a></span>
            <span class="block text-sm text-white opacity-80">©2024 Fleetfoot™. All Rights Reserved.</span>
        </div>
    </footer>

    <!-- JS Scripts -->
    <script src="{% static 'js/wishlist.js' %}"></script>
    {% block js_scripts %}{% endblock js_scripts %}
</body>
</html>